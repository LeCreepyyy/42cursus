/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   big_algo.c                                         :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: vpoirot <vpoirot@student.42.fr>            +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2023/05/15 15:19:38 by vpoirot           #+#    #+#             */
/*   Updated: 2023/05/31 15:11:43 by vpoirot          ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

#include "push_swap.h"

int	find_nbr(int *stack, int limit)
{
	int	i;

	i = 0;
	while (stack[i])
	{
		if (stack[i] < limit)
			return (1);
		i++;
	}
	return (0);
}

void	spliter(int	*b, int add, int split)
{
	int	limit;

	limit = split - (add / 2);
	if (b[0] > limit)
		rotate(b, 'b');
}

void	big_sort(int *a, int *b, int package)
{
	int	split;
	int	add;
	int	size;

	size = lenstack(a);
	add = size / package;
	split = add;
	while (split <= size)
	{
		if (a[0] < split)
		{
			push(b, a, 'b');
			spliter(b, add, split);
		}
		else
			rotate(a, 'a');
		if (!find_nbr(a, split))
			split += add;
	}
	while (a[0])
		push(b, a, 'b');
	while (b[0])
	{
		get_push_b(b, a);
	}
}

void	check_size(int *a, int *b)
{
	if (lenstack(a) <= 100)
		big_sort(a, b, 4);
	else if (lenstack(a) <= 500)
		big_sort(a, b, 8);
	else if (lenstack(a) > 500)
		big_sort(a, b, 12);
}

/*
437 463 296 130 421 339 70 413 238 312 255 375 137 251 396 226 18 231 203 198 414 91 235 366 36 90 360 469 30 390 50 212 147 160 139 61 206 83 152 431 363 201 342 460 45 181 443 500 174 273 434 271 59 423 106 336 277 451 132 400 214 120 402 268 482 373 304 183 425 20 391 355 187 84 169 330 472 176 14 260 3 94 245 475 34 264 349 73 62 493 326 305 385 429 440 104 56 74 283 459 480 301 66 102 471 225 269 335 12 244 230 87 311 150 32 69 323 387 298 266 379 185 468 467 209 237 234 417 215 24 57 464 9 394 485 331 332 438 115 103 11 205 407 388 224 371 492 272 329 218 240 42 309 483 422 159 445 123 229 274 85 484 223 278 157 389 310 28 145 279 280 35 416 8 208 481 113 294 250 217 54 282 419 449 155 474 369 448 476 236 17 5 64 210 489 197 98 404 119 86 498 253 427 374 135 351 397 320 51 367 292 456 364 124 158 72 162 362 172 33 405 100 290 441 175 81 452 37 252 105 343 285 477 465 333 314 125 126 118 128 267 221 242 7 383 202 79 19 248 430 163 75 496 182 189 178 428 166 424 302 466 48 275 44 188 200 161 454 494 270 319 43 254 297 378 306 21 399 153 262 101 316 67 108 184 370 284 170 173 386 289 365 352 324 129 63 76 13 295 38 444 171 382 49 164 408 276 348 228 211 219 151 154 149 142 167 53 356 27 168 473 116 31 337 95 4 439 325 261 23 134 259 286 220 190 122 89 112 487 340 446 41 213 344 328 490 410 39 191 321 156 110 186 347 107 345 436 1 55 263 146 114 52 131 287 71 393 148 354 47 97 109 308 257 291 92 497 26 376 361 117 138 499 111 133 141 432 46 488 322 243 194 317 470 380 447 368 303 450 491 88 82 338 80 232 195 457 193 40 442 78 392 227 233 15 353 461 327 313 300 177 372 68 136 6 281 455 2 121 415 249 199 458 127 403 93 192 293 96 16 479 334 29 495 299 288 307 453 357 341 409 420 180 265 359 433 165 143 247 486 435 418 315 478 65 411 58 395 204 241 77 350 99 216 426 377 22 258 412 179 207 256 196 462 140 144 318 246 381 25 222 401 384 239 406 358 60 10 398 346
*/
